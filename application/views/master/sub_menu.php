<?php
// Icon fontawesome v4
$iconnya = array(
  "fa fa-paypal", "fa fa-google-wallet", "fa fa-cc-visa", "fa fa-cc-stripe", "fa fa-cc-paypal", "fa fa-cc-mastercard", "fa fa-cc-jcb", "fa fa-cc-discover", "fa fa-cc-diners-club", "fa fa-cc-amex", "fa fa-wrench", "fa fa-window-restore", "fa fa-window-minimize", "fa fa-window-maximize", "fa fa-wifi", "fa fa-wheelchair-alt", "fa fa-wheelchair", "fa fa-volume-up", "fa fa-volume-off", "fa fa-volume-down", "fa fa-volume-control-phone", "fa fa-video-camera", "fa fa-user-times", "fa fa-user-secret", "fa fa-user-plus", "fa fa-user-o", "fa fa-user-circle-o", "fa fa-user-circle", "fa fa-user", "fa fa-upload", "fa fa-unlock-alt", "fa fa-unlock", "fa fa-universal-access", "fa fa-umbrella", "fa fa-tty", "fa fa-truck", "fa fa-trophy", "fa fa-tree", "fa fa-trash-o", "fa fa-trash", "fa fa-trademark", "fa fa-toggle-on", "fa fa-toggle-off", "fa fa-tint", "fa fa-window-close-o", "fa fa-window-close", "fa fa-times-circle-o", "fa fa-times-circle", "fa fa-ticket", "fa fa-thumbs-up", "fa fa-thumbs-o-up", "fa fa-thumbs-o-down", "fa fa-thumbs-down", "fa fa-thumb-tack", "fa fa-thermometer-three-quarters", "fa fa-thermometer-half", "fa fa-thermometer-quarter", "fa fa-thermometer-empty", "fa fa-thermometer-full", "fa fa-terminal", "fa fa-television", "fa fa-tasks", "fa fa-tags", "fa fa-tag", "fa fa-tablet", "fa fa-sun-o", "fa fa-suitcase", "fa fa-street-view", "fa fa-sticky-note-o", "fa fa-sticky-note", "fa fa-star-o", "fa fa-star-half-o", "fa fa-star-half", "fa fa-star", "fa fa-square-o", "fa fa-square", "fa fa-spoon", "fa fa-spinner", "fa fa-space-shuttle", "fa fa-sort-numeric-desc", "fa fa-sort-numeric-asc", "fa fa-sort-desc", "fa fa-sort-asc", "fa fa-sort-amount-desc", "fa fa-sort-amount-asc", "fa fa-sort-alpha-desc", "fa fa-sort-alpha-asc", "fa fa-sort", "fa fa-snowflake-o", "fa fa-smile-o", "fa fa-sliders", "fa fa-sitemap", "fa fa-signal", "fa fa-sign-out", "fa fa-sign-language", "fa fa-sign-in", "fa fa-shower", "fa fa-shopping-cart", "fa fa-shopping-basket", "fa fa-shopping-bag", "fa fa-ship", "fa fa-shield", "fa fa-share-square-o", "fa fa-share-square", "fa fa-share-alt-square", "fa fa-share-alt", "fa fa-server", "fa fa-search-plus", "fa fa-search-minus", "fa fa-search", "fa fa-rss-square", "fa fa-rocket", "fa fa-road", "fa fa-retweet", "fa fa-registered", "fa fa-refresh", "fa fa-recycle", "fa fa-random", "fa fa-quote-left", "fa fa-question-circle-o", "fa fa-question-circle", "fa fa-question", "fa fa-qrcode", "fa fa-puzzle-piece", "fa fa-print", "fa fa-power-off", "fa fa-podcast", "fa fa-plus-square-o", "fa fa-plus-square", "fa fa-plus-circle", "fa fa-plus", "fa fa-plug", "fa fa-plane", "fa fa-pie-chart", "fa fa-phone-square", "fa fa-phone", "fa fa-percent", "fa fa-pencil-square", "fa fa-pencil", "fa fa-paw", "fa fa-paper-plane-o", "fa fa-paper-plane", "fa fa-paint-brush", "fa fa-object-ungroup", "fa fa-object-group", "fa fa-newspaper-o", "fa fa-music", "fa fa-mouse-pointer", "fa fa-motorcycle", "fa fa-moon-o", "fa fa-money", "fa fa-mobile", "fa fa-minus-square-o", "fa fa-minus-square", "fa fa-minus-circle", "fa fa-minus", "fa fa-microphone-slash", "fa fa-microphone", "fa fa-microchip", "fa fa-meh-o", "fa fa-map-signs", "fa fa-map-pin", "fa fa-map-o", "fa fa-map-marker", "fa fa-map", "fa fa-male", "fa fa-reply-all", "fa fa-reply", "fa fa-share", "fa fa-magnet", "fa fa-magic", "fa fa-low-vision", "fa fa-lock", "fa fa-location-arrow", "fa fa-line-chart", "fa fa-lightbulb-o", "fa fa-life-ring", "fa fa-level-up", "fa fa-level-down", "fa fa-lemon-o", "fa fa-leaf", "fa fa-laptop", "fa fa-language", "fa fa-keyboard-o", "fa fa-key", "fa fa-info-circle", "fa fa-info", "fa fa-industry", "fa fa-inbox", "fa fa-picture-o", "fa fa-id-badge", "fa fa-i-cursor", "fa fa-hourglass-o", "fa fa-hourglass-end", "fa fa-hourglass-half", "fa fa-hourglass-start", "fa fa-hourglass", "fa fa-home", "fa fa-history", "fa fa-heartbeat", "fa fa-heart-o", "fa fa-heart", "fa fa-headphones", "fa fa-hdd-o", "fa fa-hashtag", "fa fa-handshake-o", "fa fa-hand-spock-o", "fa fa-hand-scissors-o", "fa fa-hand-pointer-o", "fa fa-hand-peace-o", "fa fa-hand-paper-o", "fa fa-hand-lizard-o", "fa fa-hand-rock-o", "fa fa-users", "fa fa-graduation-cap", "fa fa-globe", "fa fa-glass", "fa fa-gift", "fa fa-gavel", "fa fa-gamepad", "fa fa-futbol-o", "fa fa-frown-o", "fa fa-folder-open-o", "fa fa-folder-open", "fa fa-folder-o", "fa fa-folder", "fa fa-flask", "fa fa-flag-o", "fa fa-flag-checkered", "fa fa-flag", "fa fa-fire-extinguisher", "fa fa-fire", "fa fa-filter", "fa fa-film", "fa fa-file-word-o", "fa fa-file-powerpoint-o", "fa fa-file-pdf-o", "fa fa-file-video-o", "fa fa-file-image-o", "fa fa-file-excel-o", "fa fa-file-code-o", "fa fa-file-audio-o", "fa fa-file-archive-o", "fa fa-fighter-jet", "fa fa-female", "fa fa-rss", "fa fa-fax", "fa fa-eyedropper", "fa fa-eye-slash", "fa fa-eye", "fa fa-external-link-square", "fa fa-external-link", "fa fa-exclamation-triangle", "fa fa-exclamation-circle", "fa fa-exclamation", "fa fa-exchange", "fa fa-eraser", "fa fa-envelope-square", "fa fa-envelope-open-o", "fa fa-envelope-open", "fa fa-envelope-o", "fa fa-envelope", "fa fa-ellipsis-v", "fa fa-ellipsis-h", "fa fa-pencil-square-o", "fa fa-id-card-o", "fa fa-id-card", "fa fa-download", "fa fa-dot-circle-o", "fa fa-diamond", "fa fa-desktop", "fa fa-deaf", "fa fa-database", "fa fa-tachometer", "fa fa-cutlery", "fa fa-cubes", "fa fa-cube", "fa fa-crosshairs", "fa fa-crop", "fa fa-credit-card-alt", "fa fa-credit-card", "fa fa-creative-commons", "fa fa-copyright", "fa fa-compass", "fa fa-comments-o", "fa fa-comments", "fa fa-commenting-o", "fa fa-commenting", "fa fa-comment-o", "fa fa-comment", "fa fa-cogs", "fa fa-cog", "fa fa-coffee", "fa fa-code-fork", "fa fa-code", "fa fa-cloud-upload", "fa fa-cloud-download", "fa fa-cloud", "fa fa-times", "fa fa-clone", "fa fa-clock-o", "fa fa-circle-thin", "fa fa-circle-o-notch", "fa fa-circle-o", "fa fa-circle", "fa fa-child", "fa fa-check-square-o", "fa fa-check-square", "fa fa-check-circle-o", "fa fa-check-circle", "fa fa-check", "fa fa-certificate", "fa fa-cc", "fa fa-cart-plus", "fa fa-cart-arrow-down", "fa fa-caret-square-o-up", "fa fa-caret-square-o-right", "fa fa-caret-square-o-left", "fa fa-caret-square-o-down", "fa fa-camera-retro", "fa fa-camera", "fa fa-calendar-times-o", "fa fa-calendar-plus-o", "fa fa-calendar-o", "fa fa-calendar-minus-o", "fa fa-calendar-check-o", "fa fa-calendar", "fa fa-calculator", "fa fa-taxi", "fa fa-bus", "fa fa-bullseye", "fa fa-bullhorn", "fa fa-building-o", "fa fa-building", "fa fa-bug", "fa fa-briefcase", "fa fa-braille", "fa fa-bookmark-o", "fa fa-bookmark", "fa fa-book", "fa fa-bomb", "fa fa-bolt", "fa fa-bluetooth-b", "fa fa-bluetooth", "fa fa-blind", "fa fa-birthday-cake", "fa fa-binoculars", "fa fa-bicycle", "fa fa-bell-slash-o", "fa fa-bell-slash", "fa fa-bell-o", "fa fa-bell", "fa fa-beer", "fa fa-bed", "fa fa-battery-three-quarters", "fa fa-battery-half", "fa fa-battery-quarter", "fa fa-battery-empty", "fa fa-battery-full", "fa fa-bath", "fa fa-bars", "fa fa-barcode", "fa fa-bar-chart", "fa fa-university", "fa fa-ban", "fa fa-balance-scale", "fa fa-car", "fa fa-audio-description", "fa fa-at", "fa fa-asterisk", "fa fa-assistive-listening-systems", "fa fa-arrows-v", "fa fa-arrows-h", "fa fa-arrows", "fa fa-area-chart", "fa fa-archive", "fa fa-anchor", "fa fa-american-sign-language-interpreting", "fa fa-adjust", "fa fa-address-card-o", "fa fa-address-card", "fa fa-address-book-o", "fa fa-address-book", "fa fa-quote-right",
);
?>
<div class="content-wrapper">
  <div style="height: 20px;"></div>
  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="card card-sm card-default">
            <div class="card-header">
              <div class="row ">
                <div class="col-sm-6">
                  <h4>Sub Menu</h4>
                </div>
                <div class="col-sm-6">
                  <div class="col-xs-12 text-right">
                    <button type="button" class="btn btn-sm btn-primary" id="btnAdd" data-toggle="modal" data-target="#modal-sub-menu">
                      <i class="fa fa-plus"></i> Add Sub Menu
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <?php if ($this->session->flashdata('success')) : ?>
            <div class="alert alert-success">
              <?= $this->session->flashdata('success') ?>
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <?= $this->session->unset_userdata('success') ?>

          <?php endif; ?>

          <?php if ($this->session->flashdata('error')) : ?>
            <div class="alert alert-danger">
              <?= $this->session->flashdata('error') ?>
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <?= $this->session->unset_userdata('error') ?>

          <?php endif; ?>

          <div class="card">
            <!-- /.card-header -->
            <div class="card-body">
              <table id="example1" class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Sub Menu Name</th>
                    <th>Menu Name</th>
                    <th>Sub Menu Url</th>
                    <th>Sub Menu Icon</th>
                    <th class="text-center">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <?php if (!empty($SubMenuRecords)) {
                    foreach ($SubMenuRecords as $record) { ?>
                      <tr>
                        <td><?php echo $record->sub_menu_id; ?></td>
                        <td><?php echo $record->sub_menu_name; ?></td>
                        <td><?php echo $record->menu_name; ?></td>
                        <td><?php echo $record->sub_menu_url; ?></td>
                        <td><?php echo $record->sub_menu_icon; ?></td>
                        <td class="text-center">

                          <a id="btnSelect" class="btn btn-xs btn-primary" data-submenuname="<?= $record->sub_menu_name ?>" data-submenuurl="<?= $record->sub_menu_url ?>" data-menuid="<?= $record->menu_id ?>" data-submenuid="<?= $record->sub_menu_id ?>" data-submenuicon="<?= $record->sub_menu_icon ?>" data-toggle="modal" data-target="#modal-sub-menu-update"><i class="fa fa-pen"></i></a>

                          <a id="btnDelete" class="btn btn-xs btn-danger tombol-hapus" href="<?php echo base_url() .
                                                                                                'DeleteSubMenu/' .
                                                                                                $record->sub_menu_id; ?>"><i class="fa fa-trash"></i></a>
                        </td>
                      </tr>
                  <?php }
                  } ?>
                </tbody>

              </table>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
  </section>
  <!-- /.content -->

  <!-- Modal -->

  <div class="modal fade" id="modal-sub-menu">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Input Sub Menu</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form role="form" action="<?php echo base_url(); ?>InsertSubMenu" method="post">
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-12">
                <label for="submenuname">Sub Menu Name</label>
                <input class="form-control" id="sub_menu_name" placeholder="Sub Menu Name" name="sub_menu_name" maxlength="50" required>
                <br>
                <label>Menu Name</label>
                <select class="form-control select2bs4" name="menu_id">
                  <?php foreach ($MenuRecords as $row) : ?>
                    <option value="<?php echo $row->menu_id; ?>"><?php echo $row->menu_name; ?></option>
                  <?php endforeach; ?>
                </select>
                <br>
                <label for="submenuurl">Sub Menu Url</label>
                <input class="form-control" id="sub_menu_url" placeholder="Sub Menu Url" name="sub_menu_url" maxlength="50" required>
                <br>
                <!-- <label>Sub Menu Icon</label> -->
                <!-- <?php foreach ($iconnya as $row) : ?>
                  <div value="<?php echo $row; ?>"><i class="<?= $row; ?>"></i><?= $row; ?></div>
                <?php endforeach; ?> -->
                <!-- <select class="form-control select2bs4" id="sub_menu_icon" placeholder="Sub Menu Icon" name="sub_menu_icon" required>
                  <?php foreach ($iconnya as $row) : ?>
                    <option value="<?php echo $row; ?>"><i class="<?= $row; ?>" aria-hidden="true"></i><?= $row; ?></option>
                  <?php endforeach; ?>
                </select> -->
                <label for="counterformatno">Sub Menu Icon</label>
                <input class="form-control" id="sub_menu_icon" placeholder="Sub Menu Icon" name="sub_menu_icon" maxlength="50" required>
              </div>

            </div>
          </div>
          <div class="modal-footer justify-content-between">
            <input type="submit" id="btnSubmit" class="btn btn-primary" value="Submit" />
            <input type="reset" class="btn btn-default" value="Reset" />
          </div>
        </form>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>


  <div class="modal fade" id="modal-sub-menu-update">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Edit Sub Menu</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form role="form" action="<?php echo base_url(); ?>UpdateSubMenu" method="post">
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-12">
                <input type="hidden" value="" name="sub_menu_id_update" id="sub_menu_id_update" />
                <label for="submenuname">Sub Menu Name</label>
                <input class="form-control" id="sub_menu_name_update" placeholder="Sub Menu Name" name="sub_menu_name_update" maxlength="50" required>
                <br>
                <label>Menu Name</label>
                <select id="menu_id_update" class="form-control select2bs4" name="menu_id_update">
                  <?php foreach ($MenuRecords as $row) : ?>
                    <option value="<?php echo $row->menu_id; ?>"><?php echo $row->menu_name; ?></option>
                  <?php endforeach; ?>
                </select>
                <br>
                <label for="submenuurl">Sub Menu Url</label>
                <input class="form-control" id="sub_menu_url_update" placeholder="Sub Menu Url" name="sub_menu_url_update" maxlength="50" required>
                <br>
                <label for="counterformatno">Sub Menu Icon</label>
                <input class="form-control" id="sub_menu_icon_update" placeholder="Sub Menu Icon" name="sub_menu_icon_update" maxlength="50" required>
              </div>

            </div>
          </div>
          <div class="modal-footer justify-content-between">
            <input type="submit" id="btnUpdate" class="btn btn-primary" value="Update" />
            <input type="reset" class="btn btn-default" value="Reset" />
          </div>
        </form>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>

</div>

<script>
  $(document).on("click", "#btnSelect", function() {
    //Counter
    var sub_menu_name = $(this).data("submenuname");
    var sub_menu_url = $(this).data("submenuurl");
    var sub_menu_icon = $(this).data("submenuicon");
    var sub_menu_id = $(this).data("submenuid");
    var menu_id = $(this).data("menuid");

    $("#sub_menu_name_update").val(sub_menu_name);
    $("#sub_menu_url_update").val(sub_menu_url);
    $("#sub_menu_icon_update").val(sub_menu_icon);

    $("#sub_menu_id_update").val(sub_menu_id);
    $("#menu_id_update").val(menu_id).trigger("change");;

  });

  $(document).on("click", "#btnAdd", function() {
    // Counter
    $("#sub_menu_name").val("");
    $("#sub_menu_url").val("");
    $("#sub_menu_icon").val("");

  });
</script>